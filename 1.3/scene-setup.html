<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Scene Setup  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
    <script src='js/retina-preprocess.js' defer></script>
    <script src='js/retina.js' defer></script>
  </head>
  <body>


    <a title="Scene Setup  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          SKTiled 1.3 Docs
        </a>
         (89% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/mfessenden/SKTiled">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">SKTiled Reference</a>
      <img class="carat" src="img/carat.png" />
      Scene Setup  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Table%20of%20Contents.html">Table of Contents</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="whats-new.html">What&#39;s New</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="getting-started.html">Getting Started</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="scene-setup.html">Scene Setup</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="working-with-maps.html">Working with Maps</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="working-with-tilesets.html">Working with Tilesets</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="working-with-layers.html">Working with Layers</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="working-with-tiles.html">Working with Tiles</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="coordinates.html">Coordinates</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="working-with-objects.html">Working with Objects</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="tiled-properties.html">Tiled Properties</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="gameplaykit.html">GameplayKit</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="extending-sktiled.html">Extending SKTiled</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="other-api-features.html">Other API Features</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="debugging.html">Debugging</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="troubleshooting.html">Troubleshooting</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TiledObjectType.html">TiledObjectType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TilemapDelegate.html">TilemapDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TiledSceneDelegate.html">TiledSceneDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TiledSceneCameraDelegate.html">TiledSceneCameraDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TilesetDataSource.html">TilesetDataSource</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/DebugDrawableType.html">DebugDrawableType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TiledMappableType.html">TiledMappableType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Class%20Hierarchy.html">Class Hierarchy</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTilemap.html">SKTilemap</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTilemap.html#/s:7SKTiled9SKTilemapC21CameraZoomConstraintsV">– CameraZoomConstraints</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTilemap/RenderStatistics.html">– RenderStatistics</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTileset.html">SKTileset</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTiledLayerObject.html">SKTiledLayerObject</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTiledLayerObject/TileOffset.html">– TileOffset</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTileLayer.html">SKTileLayer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTileLayerChunk.html">SKTileLayerChunk</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKObjectGroup.html">SKObjectGroup</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKGroupLayer.html">SKGroupLayer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKImageLayer.html">SKImageLayer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTile.html">SKTile</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTile.html#/s:7SKTiled6SKTileC17TileAlignmentHintO">– TileAlignmentHint</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTile.html#/s:7SKTiled6SKTileC12PhysicsShapeO">– PhysicsShape</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTilesetData.html">SKTilesetData</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTileObject.html">SKTileObject</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTileObject.html#/s:7SKTiled12SKTileObjectC05TiledC4TypeO">– TiledObjectType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTileObject.html#/s:7SKTiled12SKTileObjectC05TiledC5ShapeO">– TiledObjectShape</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTileObject.html#/s:7SKTiled12SKTileObjectC13CollisionTypeO">– CollisionType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTiledScene.html">SKTiledScene</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTiledSceneCamera.html">SKTiledSceneCamera</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/SKTiledGraphNode.html">SKTiledGraphNode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TileAnimationFrame.html">TileAnimationFrame</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TileFlags.html">TileFlags</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TileID.html">TileID</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Globals.html">Globals</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TiledGlobals.html">TiledGlobals</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TiledGlobals/Version.html">– Version</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TiledGlobals.html#/s:7SKTiled12TiledGlobalsC13RenderQualityV">– RenderQuality</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TiledGlobals/DebugDisplayOptions.html">– DebugDisplayOptions</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TiledGlobals.html#/s:7SKTiled12TiledGlobalsC15TimeDisplayModeO">– TimeDisplayMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TiledGlobals/Renderer.html">– Renderer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/CameraZoomClamping.html">CameraZoomClamping</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TileRenderMode.html">TileRenderMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TileUpdateMode.html">TileUpdateMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TextObjectAttributes.html">TextObjectAttributes</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TextObjectAttributes.html#/s:7SKTiled20TextObjectAttributesV0B9AlignmentV">– TextAlignment</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <h1 id='setting-up-your-scenes' class='heading'>Setting Up Your Scenes</h1>

<ul>
<li><a href="#tiled-content-in-spritekit">Tiled Content in SpriteKit</a>

<ul>
<li><a href="tilemapdelegate-protocol"><code><a href="Protocols/TilemapDelegate.html">TilemapDelegate</a></code> Protocol</a></li>
<li><a href="#scene-setup">Scene Setup</a></li>
<li><a href="#custom-tile-objects">Custom Tile Objects</a></li>
</ul></li>
<li><a href="#sktilesetdatasource-protocol"><code><a href="Protocols/TilesetDataSource.html">TilesetDataSource</a></code> Protocol</a></li>
<li><a href="#tiledscenedelegate-protocol"><code><a href="Protocols/TiledSceneDelegate.html">TiledSceneDelegate</a></code> Protocol</a>

<ul>
<li><a href="#tiled-scene-camera">Tiled Scene Camera</a>

<ul>
<li><a href="#adding-delegates">Adding Delegates</a></li>
</ul></li>
<li><a href="#loading-external-content">Loading External Content</a></li>
</ul></li>
</ul>

<p>Using Tiled assets in your projects is very straightforward with <strong>SKTiled</strong>. There are several tools included that allow you to easily access and customize content for your game.</p>
<h2 id='tiled-content-in-spritekit' class='heading'>Tiled Content in SpriteKit</h2>

<p>Getting Tiled content into SpriteKit is a breeze!</p>

<p>Simply setup your view controller and scene as you would normally, and add a tilemap to your scene via the <code>SKScene.load(tmxFile:)</code> method (included as an extension):</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">scene</span> <span class="o">=</span> <span class="kt">SKScene</span><span class="p">(</span><span class="nv">size</span><span class="p">:</span> <span class="n">skView</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="n">scene</span><span class="o">.</span><span class="n">scaleMode</span> <span class="o">=</span> <span class="o">.</span><span class="n">aspectFill</span>
<span class="n">skView</span><span class="o">.</span><span class="nf">presentScene</span><span class="p">(</span><span class="n">scene</span><span class="p">)</span>

<span class="k">if</span> <span class="k">let</span> <span class="nv">tilemap</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="nv">tmxFile</span><span class="p">:</span> <span class="s">"map1"</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">scene</span><span class="o">.</span><span class="nf">addChild</span><span class="p">(</span><span class="n">tilemap</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h3 id='tilemapdelegate-protocol' class='heading'>TilemapDelegate Protocol</h3>

<p>The <code><a href="Protocols/TilemapDelegate.html">TilemapDelegate</a></code> protocol is provided to allow you to easily access (and modify) your content even as it is being created. As the protocol methods are all optional, you only have to implement the controls you need. It is recommended that your SpriteKit scenes conform to this protocol.</p>
<pre class="highlight swift"><code><span class="kd">extension</span>  <span class="kt">SKScene</span><span class="p">:</span> <span class="kt">TilemapDelegate</span> <span class="p">{}</span>
</code></pre>

<p>In addition to the optional callback methods, the protocol allows you to substitute your own classes for the default <strong>tile</strong>, <strong>vector</strong> and <strong>pathfinding</strong> objects.</p>
<pre class="highlight swift"><code><span class="kd">@objc</span> <span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">TilemapDelegate</span><span class="p">:</span> <span class="kt">TiledEventHandler</span> <span class="p">{</span>

    <span class="c1">/// Determines the z-position difference between layers.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="k">var</span> <span class="nv">zDeltaForLayers</span><span class="p">:</span> <span class="kt">CGFloat</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

    <span class="c1">/// Called when the tilemap is instantiated.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter tilemap: tilemap instance.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">didBeginParsing</span><span class="p">(</span><span class="n">_</span> <span class="nv">tilemap</span><span class="p">:</span> <span class="kt">SKTilemap</span><span class="p">)</span>

    <span class="c1">/// Called when a tileset is added to a map.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter tileset: tileset instance.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">didAddTileset</span><span class="p">(</span><span class="n">_</span> <span class="nv">tileset</span><span class="p">:</span> <span class="kt">SKTileset</span><span class="p">)</span>

    <span class="c1">/// Called when a layer is added to a tilemap.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter layer: tilemap instance.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">didAddLayer</span><span class="p">(</span><span class="n">_</span> <span class="nv">layer</span><span class="p">:</span> <span class="kt">SKTiledLayerObject</span><span class="p">)</span>

    <span class="c1">/// Called when the tilemap is finished parsing.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter tilemap: tilemap instance.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">didReadMap</span><span class="p">(</span><span class="n">_</span> <span class="nv">tilemap</span><span class="p">:</span> <span class="kt">SKTilemap</span><span class="p">)</span>

    <span class="c1">/// Called when the tilemap layers are finished rendering.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter tilemap: tilemap instance.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">didRenderMap</span><span class="p">(</span><span class="n">_</span> <span class="nv">tilemap</span><span class="p">:</span> <span class="kt">SKTilemap</span><span class="p">)</span>

    <span class="c1">/// Called when the a navigation graph is built for a layer.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter graph: `GKGridGraph&lt;GKGridGraphNode&gt;` graph node instance.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">didAddNavigationGraph</span><span class="p">(</span><span class="n">_</span> <span class="nv">graph</span><span class="p">:</span> <span class="kt">GKGridGraph</span><span class="o">&lt;</span><span class="kt">GKGridGraphNode</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="c1">/// Specify a custom tile object for use in tile layers.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter named: optional class name.</span>
    <span class="c1">/// - Returns: tile object type.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">objectForTileType</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">SKTile</span><span class="o">.</span><span class="k">Type</span>

    <span class="c1">/// Specify a custom object for use in object groups.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter named: optional class name</span>
    <span class="c1">/// - Returns: vector object type.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">objectForVectorType</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">SKTileObject</span><span class="o">.</span><span class="k">Type</span>

    <span class="c1">/// Specify a custom graph node object for use in navigation graphs.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameter named: optional class name.</span>
    <span class="c1">/// - Returns: pathfinding graph node type.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">objectForGraphType</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">GKGridGraphNode</span><span class="o">.</span><span class="k">Type</span>

    <span class="c1">/// Called whem a tile is about to be built in a layer.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameters:</span>
    <span class="c1">///   - globalID: tile global id.</span>
    <span class="c1">///   - coord: tile coordinate.</span>
    <span class="c1">///   - in: layer name.</span>
    <span class="c1">/// - Returns: tile global id.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">willAddTile</span><span class="p">(</span><span class="nv">globalID</span><span class="p">:</span> <span class="kt">UInt32</span><span class="p">,</span> <span class="nv">coord</span><span class="p">:</span> <span class="n">simd_int2</span><span class="p">,</span> <span class="nv">in</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">UInt32</span>

    <span class="c1">/// Called whem a tile was built in a layer.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameters:</span>
    <span class="c1">///   - tile: tile instance.</span>
    <span class="c1">///   - coord: tile coordinate.</span>
    <span class="c1">///   - in: layer name.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">didAddTile</span><span class="p">(</span><span class="n">_</span> <span class="nv">tile</span><span class="p">:</span> <span class="kt">SKTile</span><span class="p">,</span> <span class="nv">coord</span><span class="p">:</span> <span class="n">simd_int2</span><span class="p">,</span> <span class="nv">in</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span>

    <span class="c1">/// Provides custom attributes for objects of a certain *Tiled type*.</span>
    <span class="c1">///</span>
    <span class="c1">/// - Parameters:</span>
    <span class="c1">///   - type: type value.</span>
    <span class="c1">///   - named: optional node name.</span>
    <span class="c1">/// - Returns: custom attributes dictionary.</span>
    <span class="kd">@objc</span> <span class="kd">optional</span> <span class="kd">func</span> <span class="nf">attributesForNodes</span><span class="p">(</span><span class="nv">ofType</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span> <span class="nv">named</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span> <span class="nv">globalIDs</span><span class="p">:</span> <span class="p">[</span><span class="kt">UInt32</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">String</span> <span class="p">:</span> <span class="kt">String</span><span class="p">]?</span>
<span class="p">}</span>
</code></pre>
<h3 id='scene-setup' class='heading'>Scene Setup</h3>

<p>Setting up scenes is straightforward. Tile maps should be loaded during the <a href="https://developer.apple.com/documentation/spritekit/skscene/1519607-didmove"><code>SKScene.didMove(to:)</code></a> method, and updated during the <a href="https://developer.apple.com/documentation/spritekit/skscene/1519802-update"><code>SKScene.update(_:)</code></a> method (if you choose to render your maps with <strong>SpriteKit actions</strong>, you can forgo adding the <code><a href="Classes/SKTilemap.html">SKTilemap</a></code> node to the scene&rsquo;s update method).</p>

<p>A basic scene setup could be as simple as:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">GameScene</span><span class="p">:</span> <span class="kt">SKScene</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">tilemap</span><span class="p">:</span> <span class="kt">SKTilemap</span><span class="p">?</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">didMove</span><span class="p">(</span><span class="n">to</span> <span class="nv">view</span><span class="p">:</span> <span class="kt">SKView</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// load a named map</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">tilemap</span> <span class="o">=</span> <span class="kt">SKTilemap</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="nv">tmxFile</span><span class="p">:</span> <span class="s">"myTiledFile"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">addChild</span><span class="p">(</span><span class="n">tilemap</span><span class="p">)</span>
            <span class="c1">// center the tilemap in the scene</span>
            <span class="n">tilemap</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="n">tilemap</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="k">self</span><span class="o">.</span><span class="n">tilemap</span> <span class="o">=</span> <span class="n">tilemap</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">update</span><span class="p">(</span><span class="n">_</span> <span class="nv">currentTime</span><span class="p">:</span> <span class="kt">TimeInterval</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// update tilemap</span>
        <span class="k">self</span><span class="o">.</span><span class="n">tilemap</span><span class="p">?</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="n">currentTime</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>If you choose to implement the <strong><code><a href="Protocols/TilemapDelegate.html">TilemapDelegate</a></code></strong> protocol, you can utilize as many of the optional callback methods as you see fit. You&rsquo;ll need to specify the tilemap&rsquo;s delegate at creation:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">GameScene</span><span class="p">:</span> <span class="kt">SKScene</span><span class="p">,</span> <span class="kt">TilemapDelegate</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">tilemap</span><span class="p">:</span> <span class="kt">SKTilemap</span><span class="p">?</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">didMove</span><span class="p">(</span><span class="n">to</span> <span class="nv">view</span><span class="p">:</span> <span class="kt">SKView</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">tilemap</span> <span class="o">=</span> <span class="kt">SKTilemap</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="nv">fromFile</span><span class="p">:</span> <span class="s">"myTiledFile"</span><span class="p">,</span> <span class="nv">delegate</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// add the tilemap to the scene</span>
            <span class="nf">addChild</span><span class="p">(</span><span class="n">tilemap</span><span class="p">)</span>
            <span class="c1">// center the tilemap in the scene</span>
            <span class="n">tilemap</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="n">tilemap</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
            <span class="k">self</span><span class="o">.</span><span class="n">tilemap</span> <span class="o">=</span> <span class="n">tilemap</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">didRenderMap</span><span class="p">(</span><span class="n">_</span> <span class="nv">tilemap</span><span class="p">:</span> <span class="kt">SKTilemap</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// finish setting up map here</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">obstaclesLayer</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">objectGroup</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"Obstacles"</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">obstaclesLayer</span><span class="o">.</span><span class="n">isHidden</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="n">obstaclesLayer</span><span class="o">.</span><span class="nf">setupPhysics</span><span class="p">()</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">update</span><span class="p">(</span><span class="n">_</span> <span class="nv">currentTime</span><span class="p">:</span> <span class="kt">TimeInterval</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// update tilemap</span>
        <span class="k">self</span><span class="o">.</span><span class="n">tilemap</span><span class="p">?</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="n">currentTime</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='custom-tile-objects' class='heading'>Custom Tile Objects</h3>

<p>It is possible to use your own custom tile sprite objects in your projects. Subclass the built-in <code><a href="Classes/SKTile.html">SKTile</a></code> object and make it available in your scenes allows you to use different tile type for different scenes.</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">MainMenuScene</span><span class="p">:</span> <span class="kt">SKScene</span><span class="p">,</span> <span class="kt">TilemapDelegate</span> <span class="p">{</span>

    <span class="c1">/// use a custom tile type for the main menu</span>
    <span class="kd">func</span> <span class="nf">objectForTile</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="kt">String</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">SKTile</span><span class="o">.</span><span class="k">Type</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">MenuButtonTile</span><span class="o">.</span><span class="k">self</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>See the <a href="extending.html"><strong>Extending</strong></a> section for more details.</p>
<h2 id='tilesetdatasource-protocol' class='heading'>TilesetDataSource Protocol</h2>

<p>The <code><a href="Protocols/TilesetDataSource.html">TilesetDataSource</a></code> protocol is new as of <strong>SKTiled 1.20</strong>. Objects conforming to this protocol can specify alternate attributes for a tileset as it is being parsed. For example, you can change the spritesheet image name of a tileset before the source file is loaded:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">SceneManager</span><span class="p">:</span> <span class="kt">TilesetDataSource</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">willAddSpriteSheet</span><span class="p">(</span><span class="n">to</span> <span class="nv">tileset</span><span class="p">:</span> <span class="kt">SKTileset</span><span class="p">,</span> <span class="nv">fileNamed</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">spritesheetForGameResolution</span> <span class="o">=</span> <span class="n">tileset</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">gameResolution</span><span class="o">.</span><span class="n">rawValue</span><span class="p">]</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">spritesheetForGameResolution</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">fileNamed</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>You&rsquo;ll need to make certain that the image you substitute has the same dimensions &amp; layout as the image you are swapping it out for; the tileset will still retain the size and tile count properties defined in <strong>Tiled</strong>.</p>
<h2 id='tiledscenedelegate-protocol' class='heading'>TiledSceneDelegate Protocol</h2>

<p>The included demo scene conforms to the <code><a href="Protocols/TiledSceneDelegate.html">TiledSceneDelegate</a></code> protocol. This protocol outlines a standard SpriteKit game scene implementation with a camera that can interact with your tilemap. The included <code><a href="Classes/SKTiledScene.html">SKTiledScene</a></code> class conforms to this protocol and can serve as a template, though you are free to implement your own setups.</p>

<p><img src="images/scene-hierarchy.svg" alt="Scene Hierarchy"></p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">TiledSceneDelegate</span><span class="p">:</span> <span class="kd">class</span> <span class="p">{</span>

    <span class="c1">/// Root container node. Tiled assets are parented to this node.</span>
    <span class="k">var</span> <span class="nv">worldNode</span><span class="p">:</span> <span class="kt">SKNode</span><span class="o">!</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="c1">/// Custom scene camera.</span>
    <span class="k">var</span> <span class="nv">cameraNode</span><span class="p">:</span> <span class="kt">SKTiledSceneCamera</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="c1">/// Tile map node.</span>
    <span class="k">var</span> <span class="nv">tilemap</span><span class="p">:</span> <span class="kt">SKTilemap</span><span class="p">?</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>

    <span class="c1">/// Load a tilemap from disk, with optional tilesets.</span>
    <span class="kd">func</span> <span class="nf">load</span><span class="p">(</span><span class="nv">tmxFile</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">inDirectory</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span>
              <span class="n">withTilesets</span> <span class="nv">tilesets</span><span class="p">:</span> <span class="p">[</span><span class="kt">SKTileset</span><span class="p">],</span>
              <span class="nv">ignoreProperties</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span>
              <span class="nv">loggingLevel</span><span class="p">:</span> <span class="kt">LoggingLevel</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SKTilemap</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p>The tilemap is parented to a world container node, which interacts with the included <code><a href="Classes/SKTiledSceneCamera.html">SKTiledSceneCamera</a></code> object and allows you to easily navigate the scene with mouse &amp; touch events, as well as exchanging data with the scene and tilemaps. The world node is set to 0,0 in the scene by default.</p>

<p>Calling the class method <a href="Classes/SKTilemap.html#/s:7SKTiled9SKTilemapC4loadACSgSS7tmxFile_SSSg11inDirectoryAA0B8Delegate_pSg8delegateSayAA9SKTilesetCGSg12withTilesetsSb16ignorePropertiesAA12LoggingLevelO07loggingP0tFZ"><code><a href="Classes/SKTilemap.html#/s:7SKTiled9SKTilemapC4load7tmxFileACSgSS_tFZ">SKTilemap.load(tmxFile:)</a></code></a> will initialize a parser to read the file name given.</p>

<p>To see the <code><a href="Classes/SKTiledScene.html">SKTiledScene</a></code> in action, compile one of the demo targets and look at the <a href="https://github.com/mfessenden/SKTiled/blob/master/Demo/SKTiledDemoScene.swift"><code>SKTiledDemoScene</code></a> class.</p>
<h3 id='tiled-scene-camera' class='heading'>Tiled Scene Camera</h3>

<p><img src="images/camera-delegate.svg" alt="Camera Delegates"></p>

<p>The <code><a href="Classes/SKTiledSceneCamera.html">SKTiledSceneCamera</a></code> node is a custom <a href="https://developer.apple.com/documentation/spritekit/skcameranode">SpriteKit camera</a> that interacts with the your scene and any loaded tilemaps. To allow other objects to be notified of camera changes, you need to conform them to the <code><a href="Protocols/TiledSceneCameraDelegate.html">TiledSceneCameraDelegate</a></code> protocol. With this, you will want to implement the following methods:</p>
<pre class="highlight swift"><code><span class="c1">// all platforms</span>
<span class="kd">func</span> <span class="nf">cameraPositionChanged</span><span class="p">(</span><span class="nv">newPosition</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">cameraZoomChanged</span><span class="p">(</span><span class="nv">newZoom</span><span class="p">:</span> <span class="kt">CGFloat</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">cameraBoundsChanged</span><span class="p">(</span><span class="nv">bounds</span><span class="p">:</span> <span class="kt">CGRect</span><span class="p">,</span> <span class="nv">position</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">,</span> <span class="nv">zoom</span><span class="p">:</span> <span class="kt">CGFloat</span><span class="p">)</span>

<span class="c1">// iOS only</span>
<span class="kd">func</span> <span class="nf">sceneDoubleTapped</span><span class="p">(</span><span class="nv">location</span><span class="p">:</span> <span class="kt">CGPoint</span><span class="p">)</span>

<span class="c1">// macOS only</span>
<span class="kd">func</span> <span class="nf">sceneClicked</span><span class="p">(</span><span class="nv">event</span><span class="p">:</span> <span class="kt">NSEvent</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">sceneRightClicked</span><span class="p">(</span><span class="nv">event</span><span class="p">:</span> <span class="kt">NSEvent</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">sceneDoubleClicked</span><span class="p">(</span><span class="nv">event</span><span class="p">:</span> <span class="kt">NSEvent</span><span class="p">)</span>
<span class="kd">func</span> <span class="nf">mousePositionChanged</span><span class="p">(</span><span class="nv">event</span><span class="p">:</span> <span class="kt">NSEvent</span><span class="p">)</span>

</code></pre>

<p>The methods are all optional, so only create methods for the functions you need. For macOS games, be sure to set the <a href="https://developer.apple.com/documentation/appkit/nswindow/1419340-acceptsmousemovedevents"><code>NSWindow.acceptsMouseEvents</code></a> property to <code>true</code>.</p>
<h4 id='adding-delegates' class='heading'>Adding Delegates</h4>

<p>To add your objects as camera delegates, implement the delegate methods you need and add them to the camera&rsquo;s <a href="Classes/SKTiledSceneCamera.html#addDelegate">delegates</a> property:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Marker</span><span class="p">:</span> <span class="kt">TiledSceneCameraDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">cameraZoomChanged</span><span class="p">(</span><span class="nv">newZoom</span><span class="p">:</span> <span class="kt">CGFloat</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">newZoom</span> <span class="o">&lt;=</span> <span class="n">minZoom</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="nf">redraw</span><span class="p">(</span><span class="nv">zoom</span><span class="p">:</span> <span class="n">minZoom</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// create a new object &amp; add it to the camera delegates</span>
<span class="k">let</span> <span class="nv">marker</span> <span class="o">=</span> <span class="kt">Marker</span><span class="p">()</span>

<span class="c1">// enable camera notifications</span>
<span class="n">marker</span><span class="o">.</span><span class="n">receiveCameraUpdates</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">cameraNode</span><span class="o">.</span><span class="nf">addDelegate</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</code></pre>
<h3 id='loading-external-content' class='heading'>Loading External Content</h3>

<p>The demo project allows you to load and test your own Tiled content (macOS only). Simply compile the macOS demo target and select <strong>Load tile map</strong> from the <strong>File</strong> menu.</p>

<p><img src="images/demo-load-external.svg" alt="Loading External"></p>

<p>Next: <a href="working-with-maps.html">Working with Maps</a> - <a href="Documentation.html">Index</a></p>

<p>[skscene-load-url]:</p>

<!-- // TODO: fix this -->

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>© 2020 <a class="link" href="https://github.com/mfessenden" target="_blank" rel="external">Michael Fessenden</a> under <a class="link" href="https://github.com/mfessenden/SKTiled/tree/master/LICENSE" target="_blank" rel="external">open source license</a>.</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
